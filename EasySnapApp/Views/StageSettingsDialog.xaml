<Window x:Class="EasySnapApp.Views.StageSettingsDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Stage Settings"
        Height="605" Width="889"
        Background="#1E1E22" Foreground="#F0F0F0"
        FontFamily="Segoe UI" FontSize="13">
	<Grid Margin="18">
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="2.5*"/>
			<ColumnDefinition Width="2*"/>
		</Grid.ColumnDefinitions>

		<!-- Live Kinect Depth Preview + Scaled Overlay -->
		<Border BorderBrush="#444" BorderThickness="1" CornerRadius="6" Grid.Column="0">
			<Viewbox Stretch="Uniform">
				<Grid x:Name="PreviewContainer">
					<!-- depth image -->
					<Image x:Name="PreviewImage" Stretch="Fill"/>
					<!-- overlay: mask, crop rect, corners -->
					<Canvas x:Name="OverlayCanvas"
                            Background="Transparent"
                            IsHitTestVisible="True"/>
					<!-- debug text in top‐left -->
					<TextBlock x:Name="DebugText"
                               FontFamily="Consolas"
                               FontSize="12"
                               Foreground="Yellow"
                               Margin="4"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Top"
                               TextWrapping="Wrap"/>
				</Grid>
			</Viewbox>
		</Border>

		<!-- Settings controls -->
		<StackPanel Grid.Column="1" Margin="24,0,0,0" VerticalAlignment="Top">
			<TextBlock Text="Stage Area Crop" FontWeight="Bold" FontSize="16" Margin="0,0,0,12"/>
			<StackPanel Orientation="Horizontal" Margin="0,0,0,8">
				<TextBlock Text="Left:" Width="40" VerticalAlignment="Center"/>
				<TextBox x:Name="LeftBox" Width="55" Margin="2,0"/>
				<TextBlock Text="Top:" Width="40" VerticalAlignment="Center" Margin="10,0,0,0"/>
				<TextBox x:Name="TopBox" Width="55" Margin="2,0"/>
			</StackPanel>
			<StackPanel Orientation="Horizontal" Margin="0,0,0,8">
				<TextBlock Text="Right:" Width="40" VerticalAlignment="Center"/>
				<TextBox x:Name="RightBox" Width="55" Margin="2,0"/>
				<TextBlock Text="Bottom:" Width="40" VerticalAlignment="Center" Margin="10,0,0,0"/>
				<TextBox x:Name="BottomBox" Width="55" Margin="2,0"/>
			</StackPanel>
			<Button x:Name="ResetButton" Content="Reset Crop" Width="110" Margin="0,0,0,12"/>

			<TextBlock x:Name="AreaLabel"
                       Margin="0,8,0,8"
                       FontWeight="SemiBold"
                       Foreground="#D0D0A0"
                       FontSize="14"/>
			<Separator Margin="0,10,0,10"/>

			<TextBlock Text="Bounding Box Display Mode"
                       FontWeight="Bold"
                       Foreground="White"/>
			<StackPanel>
				<RadioButton x:Name="LiveBoxRadio"
                             GroupName="BBMode"
                             Content="Display Live Bounding Box (constantly shows best rectangle in preview)"
                             Margin="0,0,0,6"/>
				<StackPanel Orientation="Horizontal" Margin="0,0,0,6">
					<RadioButton x:Name="PreviewBoxRadio"
                                 GroupName="BBMode"
                                 Content="Display Bounding Box Preview (after scan, shows for"
                                 VerticalAlignment="Center"/>
					<TextBox x:Name="PreviewSecondsBox" Width="35" Margin="4,0" VerticalAlignment="Center"/>
					<TextBlock Text="seconds)" VerticalAlignment="Center"/>
				</StackPanel>
				<RadioButton x:Name="NoneBoxRadio"
                             GroupName="BBMode"
                             Content="Do not display bounding box in preview window"/>
			</StackPanel>
			<Separator Margin="0,18,0,18"/>

			<!-- Threshold tuning -->
			<TextBlock Text="Depth Threshold" FontWeight="Bold" Foreground="White"/>
			<StackPanel Orientation="Horizontal" Margin="0,4,0,12">
				<Slider x:Name="ThreshSlider"
                        Minimum="0"
                        Maximum="50"
                        Width="150"
                        VerticalAlignment="Center"/>
				<TextBlock x:Name="ThreshValue"
                           Width="40"
                           VerticalAlignment="Center"
                           Foreground="White"
                           TextAlignment="Center"/>
			</StackPanel>

			<StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
				<Button x:Name="OKButton"     Content="OK"     Width="90" Margin="0,0,10,0"/>
				<Button x:Name="CancelButton" Content="Cancel" Width="90"/>
			</StackPanel>
		</StackPanel>
	</Grid>
</Window>
