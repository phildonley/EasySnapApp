<Window x:Class="EasySnapApp.Views.SequenceSetupWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Sequence Setup" Height="580" Width="650"
        Background="#1E1E22" Foreground="#F0F0F0" FontFamily="Segoe UI" FontSize="13"
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize">

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Grid.Row="0" Text="Configure Image Sequence Numbering"
                   FontSize="14" FontWeight="Bold" Margin="0,0,0,15"/>

        <!-- Settings Grid -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="150"/>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="60"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="35"/>
                <RowDefinition Height="35"/>
                <RowDefinition Height="35"/>
            </Grid.RowDefinitions>

            <!-- Number of Digits -->
            <Label Grid.Row="0" Grid.Column="0" Content="Number of Digits:" 
                   VerticalAlignment="Center" Foreground="#F0F0F0"/>
            <ComboBox Grid.Row="0" Grid.Column="1" x:Name="cmbDigits" 
                      VerticalAlignment="Center" SelectionChanged="Settings_Changed">
                <ComboBoxItem Content="2" />
                <ComboBoxItem Content="3" IsSelected="True"/>
                <ComboBoxItem Content="4" />
                <ComboBoxItem Content="5" />
            </ComboBox>
            <TextBlock Grid.Row="0" Grid.Column="2" Text="(e.g., 3 digits = 103, 104, 105...)" 
                       VerticalAlignment="Center" Foreground="#AAAAAA" Margin="10,0,0,0"/>
            <Button Grid.Row="0" Grid.Column="3" x:Name="btnRulesInfo" Content="?" 
                    Width="25" Height="25" Click="ShowRules_Click" 
                    ToolTip="Show sequence rules and limits"/>

            <!-- Starting Number -->
            <Label Grid.Row="1" Grid.Column="0" Content="Starting Number:" 
                   VerticalAlignment="Center" Foreground="#F0F0F0"/>
            <TextBox Grid.Row="1" Grid.Column="1" x:Name="txtStartNumber" Text="103"
                     VerticalAlignment="Center" TextChanged="Settings_Changed" 
                     PreviewTextInput="NumberOnly_PreviewTextInput"/>
            <TextBlock Grid.Row="1" Grid.Column="2" Text="(first sequence number to use)" 
                       VerticalAlignment="Center" Foreground="#AAAAAA" Margin="10,0,0,0"/>

            <!-- Increment -->
            <Label Grid.Row="2" Grid.Column="0" Content="Increment by:" 
                   VerticalAlignment="Center" Foreground="#F0F0F0"/>
            <TextBox Grid.Row="2" Grid.Column="1" x:Name="txtIncrement" Text="2"
                     VerticalAlignment="Center" TextChanged="Settings_Changed" 
                     PreviewTextInput="NumberOnly_PreviewTextInput"/>
            <TextBlock Grid.Row="2" Grid.Column="2" Text="(spacing between sequence numbers - any positive number)" 
                       VerticalAlignment="Center" Foreground="#AAAAAA" Margin="10,0,0,0"/>
        </Grid>

        <!-- How It Works -->
        <Border Grid.Row="2" Background="#2A2A2E" Padding="10" Margin="0,15">
            <TextBlock TextWrapping="Wrap" Foreground="#CCCCCC">
                <Run Text="How it works:"/>
                <LineBreak/>
                <Run Text="Spacing sequence numbers allows inserting additional images later without renaming files. Example: with increment=2, you get 103, 105, 107... If you need to add an image between 103 and 105, you can use 104."/>
            </TextBlock>
        </Border>

        <!-- Preview -->
        <Border Grid.Row="3" Background="#2A2A2E" Padding="10" Margin="0,10">
            <StackPanel>
                <TextBlock Text="Preview - Next 5 sequence numbers:" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBlock x:Name="txtPreview" Text="103, 105, 107, 109, 111" 
                           Foreground="#66FF66" FontFamily="Consolas"/>
            </StackPanel>
        </Border>

        <!-- Parsing Info -->
        <Border Grid.Row="4" Background="#2A2A2E" Padding="10" Margin="0,10">
            <StackPanel>
                <TextBlock Text="File Parsing Logic:" FontWeight="Bold" Margin="0,0,0,5"/>
                <TextBlock x:Name="txtParsingInfo" TextWrapping="Wrap" Foreground="#FFCC66">
                    <Run Text="Files will be named: "/>
                    <Run x:Name="runFileExample" Text="07.0975.987GT.103.jpg" FontFamily="Consolas"/>
                    <LineBreak/>
                    <Run Text="The app will use the last "/>
                    <Run x:Name="runDigits" Text="3"/>
                    <Run Text=" digits before .jpg as the sequence number."/>
                </TextBlock>
            </StackPanel>
        </Border>

        <!-- Validation Warnings -->
        <Border Grid.Row="5" x:Name="borderWarnings" Background="#664400" Padding="10" Margin="0,10"
                Visibility="Collapsed">
            <TextBlock x:Name="txtWarnings" Text="⚠ Warning: Current settings may cause issues"
                       Foreground="#FFCC00" FontWeight="Bold" TextWrapping="Wrap"/>
        </Border>

        <!-- Spacer -->
        <Grid Grid.Row="6"/>

        <!-- Buttons -->
        <StackPanel Grid.Row="7" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button x:Name="btnReset" Content="Reset to Defaults" Click="Reset_Click" 
                    Padding="12,6" Margin="0,0,10,0"/>
            <Button x:Name="btnSave" Content="Save Settings" Click="Save_Click" 
                    Background="#007ACC" Foreground="White" Padding="12,6" Margin="0,0,10,0"/>
            <Button Content="Cancel" Click="Cancel_Click" Padding="12,6"/>
        </StackPanel>
    </Grid>
</Window>